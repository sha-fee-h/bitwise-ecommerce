<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= product.name %> - Product Details</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-zoom/1.7.21/jquery.zoom.min.js"></script>
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/fonts/font-awesome-4.7.0/css/font-awesome.min.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/fonts/iconic/css/material-design-iconic-font.min.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/fonts/linearicons-v1.0.0/icon-font.min.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/animate/animate.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/css-hamburgers/hamburgers.min.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/animsition/css/animsition.min.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/select2/select2.min.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/daterangepicker/daterangepicker.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/slick/slick.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/MagnificPopup/magnific-popup.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/vendor/perfect-scrollbar/perfect-scrollbar.css" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="/css/user/util.css" />
        <link rel="stylesheet" type="text/css" href="/css/user/main.css" />
        <link rel="stylesheet" type="text/css" href="/css/user/header.css"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        /* General Styles */
body {
    font-family: 'Inter', sans-serif;
    background-color: #f8f9fc;
    margin: 0;
    padding: 0;
    color: #333;
}

/* Breadcrumbs */
nav {
    font-size: 14px;
    color: #666;
}

nav a {
    color: #007bff;
    text-decoration: none;
}

nav a:hover {
    text-decoration: underline;
}

/* Product Container */
.max-w-6xl {
    max-width: 1200px;
    margin: auto;
    padding: 20px;
}

/* Product Images */
#mainImageContainer {
    border: 2px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    display: flex;
    justify-content: center;
    padding: 10px;
}

#mainImg {
    width: 100%;
    max-width: 400px;
    transition: transform 0.3s ease-in-out;
}

#mainImg:hover {
    transform: scale(1.05);
}

.flex img {
    cursor: pointer;
    transition: opacity 0.3s;
}

.flex img:hover {
    opacity: 0.7;
}

/* Product Information */
.text-2xl {
    font-size: 24px;
    font-weight: bold;
}

.text-gray-500 {
    font-size: 14px;
    color: #777;
}

.text-green-600 {
    font-size: 20px;
    font-weight: bold;
    color: #28a745;
}

.text-red-500 {
    font-size: 16px;
    font-weight: bold;
    color: #dc3545;
}

/* Stock & Availability */
.text-red-600 {
    font-size: 16px;
    font-weight: bold;
    color: #d9534f;
}

.text-green-600 {
    font-size: 16px;
    font-weight: bold;
    color: #28a745;
}

/* Specifications Table */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

table td {
    padding: 10px;
    border: 1px solid #ddd;
}

table tr:nth-child(even) {
    background-color: #f8f9fc;
}

/* Customer Reviews */
.list-disc {
    padding-left: 20px;
}

.list-disc li {
    margin-bottom: 8px;
}

/* Related Products */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 15px;
}

.grid div {
    background: #fff;
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
}

.grid div:hover {
    transform: translateY(-5px);
    box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.15);
}

.grid img {
    width: 100%;
    height: auto;
    border-radius: 6px;
}

/* Responsive Design */
@media (max-width: 768px) {
    .max-w-6xl {
        padding: 15px;
    }

    #mainImg {
        max-width: 300px;
    }
}



</style>

</head>

<body class="bg-gray-100">

    <!-- header -->
    <%- include('./partials/header') %>

    <!-- Breadcrumbs -->
    <nav class="text-gray-600 text-sm py-4 px-6">
        <a href="/" class="hover:underline">Home</a> /
        <a href="/category/<%= product.category._id %>" class="hover:underline"><%= product.category.name %></a> /
        <span class="text-gray-900 font-semibold"><%= product.name %></span>
    </nav>

    <!-- Product Detail Container -->
    <div class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-lg grid md:grid-cols-2 gap-6">
        
        <!-- Product Images -->
        <div class="flex flex-col items-center">
            <div id="mainImageContainer" class="border rounded-lg overflow-hidden">
                <img id="mainImg" src="<%= product.images[0] %>" class="w-full max-w-md">
            </div>
            <div class="flex gap-2 mt-4">
                <% product.images.forEach((img) => { %>
                    <img src="/uploads/<%=img%>" class="w-16 h-16 rounded-md border cursor-pointer hover:opacity-80" onclick="changeImage('<%= img %>')">
                <% }); %>
            </div>
        </div>

        <!-- Product Information -->
        <div class="flex flex-col">
            <h1 class="text-2xl font-bold text-gray-800"><%= product.name %></h1>
            <p class="text-gray-500 mt-1">Brand: <strong><%= product.brand %></strong></p>

            <!-- Price & Discount -->
            <div class="mt-4">
                <p class="text-3xl font-bold text-green-600">₹<%= product.price %></p>
                <% if (product.discount) { %>
                    <p class="text-red-500 font-semibold mt-1">Discount: <%= product.discount %>% OFF</p>
                <% } %>
            </div>

            <!-- Stock Status -->
            <div class="mt-4">
                <% if (product.status === "unlisted") { %>
                    <p class="text-red-600 font-semibold">This product is unavailable.</p>
                <% } else if (product.stock <= 0) { %>
                    <p class="text-red-600 font-semibold">Out of stock!</p>
                <% } else { %>
                    <p class="text-green-600 font-semibold">In Stock: <%= product.stock %> available</p>
                <% } %>
            </div>

            <!-- Ratings & Reviews -->
            <div class="mt-4">
                <p class="text-yellow-500 text-lg">⭐ <%= product.ratings || "No ratings yet" %></p>
            </div>

            <div class="mt-4">
                <h3 class="text-lg font-semibold">Customer Reviews:</h3>
                <% if (product.reviews && product.reviews.length > 0) { %>
                    <ul class="list-disc pl-6 mt-2">
                        <% product.reviews.forEach(review => { %>
                            <li class="text-gray-700"><strong><%= review.user %>:</strong> <%= review.comment %></li>
                        <% }); %>
                    </ul>
                <% } else { %>
                    <p class="text-gray-500">No reviews yet.</p>
                <% } %>
            </div>
        </div>
    </div>

    <!-- Product Specifications -->
    <div class="max-w-6xl mx-auto bg-white mt-6 p-6 rounded-lg shadow-lg">
        <h2 class="text-xl font-semibold text-gray-800">Specifications</h2>
        <table class="w-full mt-4 border border-gray-200">
            <tbody>
                <tr><td class="p-2 border">Processor</td><td class="p-2 border"><%= product.specifications.processor.brand %> <%= product.specifications.processor.model %> (<%= product.specifications.processor.speed %>)</td></tr>
                <tr><td class="p-2 border">RAM</td><td class="p-2 border"><%= product.specifications.ram.size %> <%= product.specifications.ram.type %></td></tr>
                <tr><td class="p-2 border">Storage</td><td class="p-2 border"><%= product.specifications.storage.capacity %> <%= product.specifications.storage.type %></td></tr>
                <tr><td class="p-2 border">Display</td><td class="p-2 border"><%= product.specifications.display.size %>, <%= product.specifications.display.resolution %></td></tr>
                <tr><td class="p-2 border">Graphics</td><td class="p-2 border"><%= product.specifications.graphics.brand %> <%= product.specifications.graphics.model %> (<%= product.specifications.graphics.memory %>)</td></tr>
                <tr><td class="p-2 border">Battery</td><td class="p-2 border"><%= product.specifications.battery.capacity %></td></tr>
                <tr><td class="p-2 border">Weight</td><td class="p-2 border"><%= product.specifications.weight %> kg</td></tr>
            </tbody>
        </table>
    </div>

    <!-- Related Products -->
    <div class="max-w-6xl mx-auto mt-6">
        <h2 class="text-xl font-semibold text-gray-800">Related Products</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4">
            <% relatedProducts.forEach(related => { %>
                <div class="bg-white rounded-lg shadow-lg p-4 text-center">
                    <a href="/product/<%= related._id %>">
                        <img src="<%= related.images[0] %>" class="w-full h-40 object-contain">
                        <p class="mt-2 font-semibold text-gray-700"><%= related.name %></p>
                        <p class="text-green-600 font-bold">₹<%= related.price %></p>
                    </a>
                </div>
            <% }); %>
        </div>
    </div>

    <script>
        function changeImage(imgUrl) {
            document.getElementById("mainImg").src = imgUrl;
        }
        $(document).ready(function() {
            $("#mainImg").zoom();
        });
    </script>

</body>
</html>
